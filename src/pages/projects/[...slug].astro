---
import type { CollectionEntry } from 'astro:content';
import { getCollection } from 'astro:content';
import ProjectPage from '../../layouts/ProjectPage.astro';

export async function getStaticPaths() {
  const projects = await getCollection('projects', ({ id }) => { return id.startsWith('en/') })

  return projects.map(project => {
    const [lang, ...slug] = project.slug.split('/');
	
    return { 
		params: { lang, slug: slug.join('/') || undefined }, 
		props: project
	};
  })
}

type Props = CollectionEntry<'projects'>;

const { lang, slug } = Astro.params;
const project = Astro.props;


const { Content } = await project.render();
---

<ProjectPage {...project.data} >
	<Content ></Content>
</ProjectPage>